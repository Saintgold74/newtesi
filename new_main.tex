% !TeX program = xelatex
\documentclass[12pt,a4paper,twoside]{book}
% \usepackage{biblatex}
% \addbibresource{bibliografia.bib}

% Pacchetti essenziali per XeLaTeX
\usepackage{fontspec}
\usepackage{xunicode}
\usepackage{xltxtra}
\usepackage[italian]{babel}
\usepackage{polyglossia}
\setdefaultlanguage{italian}

% Font moderni
\setmainfont{TeX Gyre Termes} % Times-like font
\setsansfont{TeX Gyre Heros}  % Helvetica-like font
\setmonofont{TeX Gyre Cursor} % Courier-like font

% Pacchetti matematici
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsfonts}
\usepackage{mathtools}

% Pacchetti per tabelle e figure
\usepackage{graphicx}
\usepackage{booktabs}
\usepackage{multirow}
\usepackage{array}
\usepackage{longtable}
\usepackage{float}
\usepackage{caption}
\usepackage{subcaption}

% Pacchetti per codice
\usepackage{listings}
\usepackage{xcolor}

% Pacchetto per la bibliografia
\usepackage{biblatex}

\bibliography{bibliografia}

% Configurazione listings per Python
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

\lstdefinestyle{mystyle}{
    backgroundcolor=\color{backcolour},   
    commentstyle=\color{codegreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=b,                    
    keepspaces=true,                 
    numbers=left,                    
    numbersep=5pt,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=2
}

\lstset{style=mystyle}

% Pacchetti per layout e formattazione
\usepackage{geometry}
\geometry{
    a4paper,
    top=3cm,
    bottom=3cm,
    left=3cm,
    right=2.5cm
}

\usepackage{setspace}
\onehalfspacing

% Pacchetti per riferimenti e link
\usepackage[hidelinks]{hyperref}
\usepackage{url}
\usepackage[backend=biber,style=numeric,sorting=none]{biblatex}
% % Intestazioni e piè di pagina
% \usepackage{fancyhdr}
% \pagestyle{fancy}
% \fancyhf{}
% \fancyhead[LE,RO]{\thepage}
% \fancyhead[LO]{\rightmark}
% \fancyhead[RE]{\leftmark}
% Altri pacchetti utili
\usepackage{enumitem}
\usepackage{lipsum}
\usepackage{titlesec}

% Personalizzazione titoli capitoli
\titleformat{\chapter}[display]
{\normalfont\huge\bfseries}{\chaptertitlename\ \thechapter}{20pt}{\Huge}

% Comandi personalizzati
\newcommand{\gist}{\textsc{gist}}
\newcommand{\gdo}{\textsc{gdo}}

% Bibliografia fittizia (in un documento reale, usare file .bib separato)
\addbibresource{bibliography.bib}
%\includeonly{nuova_C.tex}

\begin{document}

% Frontespizio
\begin{titlepage}
    \centering
    \vspace*{2cm}
    {\scshape\LARGE Università degli Studi\par}
    \vspace{1cm}
    {\scshape\Large Corso di Laurea in Ingegneria Informatica\par}
    \vspace{1.5cm}
    {\huge\bfseries Evoluzione delle Infrastrutture IT Sicure nella Grande Distribuzione Organizzata:\par}
    \vspace{0.5cm}
    {\Large\bfseries Un Framework Quantitativo per l'Ottimizzazione di Sicurezza, Performance e Compliance\par}
    \vfill
    {\Large Tesi di Laurea\par}
    \vfill
    {\large Anno Accademico 2024-2025\par}
\end{titlepage}

% Indice
%\tableofcontents

% \include{frontespizio}

%\include{01_intro}
% \include{02_threat}
% % Continua con i capitoli 3, 4 e 5...
% % Per brevità, includerò solo l'inizio del Capitolo 3
% %\include{nuovo_2}
% \include{nuova_01.tex}
% \include{nuovo_2_bis}

\include{new1}
% \include{figure/xelatex_figures_cap1.tex}


%\include{new2}
% \include{new3}

%\include{nuovo_03}
%\include{03_cloud}
%\include{nuovo_04}
%\include{04_compliance}
%\include{05_sintesi}
% Appendici
%\appendix
%\include{figure_cap2}
%\include{append_A_montecarlo}
%\include{append_B_metriche}
%\include{append_C_codice}
%\include{nuova_C}
%\include{append_D_tabelle}
% Bibliografia (placeholder - in un documento reale servirebbe un file .bib)
\printbibliography[heading=bibintoc,title={Bibliografia}]
% Alla fine di ogni capitolo
\printbibliography[
  heading=subbibliography,
  title={Bibliografia del Capitolo},
  segment=\therefsegment,
  nottype=online  % esclude fonti online se desiderato
]

% Per includere anche una sitografia separata
\printbibliography[
  heading=subbibliography,
  title={Sitografia del Capitolo},
  segment=\therefsegment,
  type=online
]
\end{document}